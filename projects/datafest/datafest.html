<!DOCTYPE html>

<html>
<head>
    <link href="https://fonts.googleapis.com/css?family=Vollkorn" rel="stylesheet">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Datafest Oregon 2016 &mdash; brereton.me</title>
    
<link rel="stylesheet" href="../../_static/theme.css" type="text/css"/>
<link rel="stylesheet" href="../../_static/pygments.css" type="text/css"/>
<link rel="stylesheet" href="../../_static/css/theme_overrides.css" type="text/css"/>
    <link rel="top" title="brereton.me" href="../../index.html"/>
    <link rel="up" title="Projects" href="../projects.html"/>
    <link rel="next" title="Andrew E. Brereton’s Blog" href="../../blog/blog.html"/>
    <link rel="prev" title="Projects" href="../projects.html"/> 
</head>
<body role="document">
<div id="toc-modal" class="modal modal-fixed-footer">
    <div class="modal-content">
        <h4>Table Of Contents</h4>

        <div class="page-content">
            <ul>
<li><a class="reference internal" href="#">Datafest Oregon 2016</a><ul>
<li><a class="reference internal" href="#the-data">The Data</a></li>
<li><a class="reference internal" href="#searching">Searching</a></li>
<li><a class="reference internal" href="#results">Results</a></li>
</ul>
</li>
</ul>

        </div>
    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-action modal-close waves-effect btn-flat ">Close</a>
    </div>
</div>
<header style="margin-bottom: 20px">
    <nav id="nav">
        <div class="nav-wrapper">
            <a href="#" data-activates="nav-mobile-sidebar" class="button-collapse"><i
                    class="mdi-navigation-menu"></i></a>
            <ul class="right hide-on-med-and-down">
                <li><a href="https://brereton.me/index.html">Home</a></li>
                <li><a href="https://brereton.me/brereton-cv.html">CV</a></li>
                <li><a href="https://github.com/atomoton/ensemblator">Ensemblator</a></li>
                <li><a href="https://brereton.me/blog/blog.html">Blog</a></li>
                <li><a href="https://brereton.me/photography/photography.html">Photography</a></li>
                <li><a href="https://brereton.me/writing/writing.html">Writing</a></li>
            </ul>
            <ul class="side-nav" id="nav-mobile-sidebar">
                
                <li><a href="https://brereton.me/index.html">Home</a></li>
                <li><a href="https://brereton.me/brereton-cv.html">CV</a></li>
                <li><a href="https://github.com/atomoton/ensemblator">Ensemblator</a></li>
                <li><a href="https://brereton.me/blog/blog.html">Blog</a></li>
                <li><a href="https://brereton.me/photography/photography.html">Photography</a></li>
                <li><a href="https://brereton.me/writing/writing.html">Writing</a></li>
            </ul>
        </div>
    </nav>
</header>
<div class="row">
    <div id="sidebar" class="col s12 m4 l3 push-m8 push-l9">
<div class="row" style="margin: 0" id="searchbox">
    <form class="col s12 no-padding" role="search" action="../../search.html" method="get">
        <div class="input-field">
            <input id="search" type="search" name="q" required>
            <label for="search" class="">Quick search</label>
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div id="sidetoc">
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../brereton-cv.html">Curriculum Vitae</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../brereton-cv.html#education">Education</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../brereton-cv.html#awards-and-honours">Awards and Honours</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../brereton-cv.html#peer-reviewed-publications">Peer-reviewed Publications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../brereton-cv.html#developed-software">Developed Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../brereton-cv.html#professional-experience">Professional Experience</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../brereton-cv.html#scientific-presentations">Scientific Presentations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../brereton-cv.html#skills-and-techniques-not-otherwise-listed">Skills and Techniques (not otherwise listed)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../brereton-cv.html#structures-submitted-to-the-rscb-protein-data-bank">Structures Submitted to the RSCB Protein Data Bank</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../brereton-cv.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../projects.html">Projects</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../projects.html#protein-science">Protein Science</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../projects.html#data-analysis">Data Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects.html#misc">Misc</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../blog/blog.html">Andrew E. Brereton&#8217;s Blog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../blog/2015/07/camping_in_the_california_redwoods/california-redwoods-panoramas.html">Camping in the California Redwoods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../blog/2015/12/01/making-real-poutine.html">Making Real Poutine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../blog/2016/02/02/brewing-my-first-beer.html">Brewing My First Beer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../blog/2016/02/04/making-a-travel-ukulele.html">Making a Travel Ukulele</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../blog/2016/05/camping-near-bend/camping-near-bend.html">Camping near Bend, OR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../blog/2016/06/camping-at-hills-creek-lake/camping-at-hills-creek-lake.html">BB Camping Trip 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../blog/2016/09/smith-rock-with-calvin/smith-rock-with-calvin.html">Quick Update! (Smith Rock, Cats, and Brothers)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../blog/2016/10/ampd1_problems/ampd1_problems.html">Mutants Among Us: the unexpected effects of a mutation in AMPD1</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../photography/photography.html">Photography</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../photography/portraits/portraits.html">Portraits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../photography/landscapes/landscapes.html">Landscapes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../photography/misc/misc.html">Miscellaneous Photos</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../writing/writing.html">Writing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../writing/writing.html#fiction">Fiction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../writing/writing.html#poetry">Poetry</a></li>
</ul>
</li>
</ul>

</div>
    </div>
    <div class="page-content-wrapper col s12 m8 l9 pull-m4 pull-l3">
        <div id="page-content-block">
            
            <div class="rel-nav">
                <a href="../../index.html"
                   title="Andrew E Brereton"
                   class="waves-effect waves-light btn"><i class="mdi-action-home"></i></a>
                <a href="#toc-modal"
                   title="Andrew E Brereton"
                   class="modal-trigger waves-effect waves-light btn"><i class="mts-list-1"></i></a>
                <a class="dropdown-button btn" href="#"
                   data-beloworigin="true"
                   data-activates="relnav-parents-1"><i class="mts-up"></i></a>
                <ul id="relnav-parents-1"
                    class="dropdown-content">
                    <li><a href="../projects.html">Projects</a></li>
                </ul> 
                <a href="../projects.html"
                   title="Projects"
                   class="waves-effect waves-light btn">
                    <i class="mts-left"></i>
                </a>
                <a href="../../blog/blog.html"
                   title="Andrew E. Brereton’s Blog"
                   class="waves-effect waves-light btn">
                    <i class="mts-right"></i>
                </a>
            </div>
            <div class="page-content">
                
  <p id="datafest"><div class="clearer"></div></p>
<a class="reference internal image-reference" href="../../_images/datafest-header.jpg"><img alt="../../_images/datafest-header.jpg" class="align-center" src="../../_images/datafest-header.jpg" style="width: 50%;" /></a>
<p><div class="clearer"></div></p>
<div class="section" id="datafest-oregon-2016">
<h1>Datafest Oregon 2016<a class="headerlink" href="#datafest-oregon-2016" title="Permalink to this headline">¶</a></h1>
<p>This year, I competed in Datafest. Datafest is a data analysis competition for students, with a corporate sponsor who provides the data. For this competition Ticketmaster provided the data, and Datafest itself was hosted by Dr. Charlotte Wickham, an assistant professor in the Statistics Department at OSU.</p>
<p>Our team was called &#8220;Pretty Terrestrial&#8221;, and consisted of myself, Michelle Wiley, Steven Freidman, and Camden Lopez. It was a lot of fun working together on this project, especially when it got down to crunch time in the final hour.</p>
<p>The best data visualization on here is the interactive map at the end, so if you want to skip ahead to that, <a class="reference external" href="#results">check out the results section</a>.</p>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="../../_images/pretty_terrestrial.jpg"><img alt="../../_images/pretty_terrestrial.jpg" src="../../_images/pretty_terrestrial.jpg" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">The team (from left to right): Steve Freidman, Andrew Brereton (me), Camden Lopez, Michelle Wiley.</span></p>
</div>
<p><div class="clearer"></div></p>
<div class="section" id="the-data">
<h2>The Data<a class="headerlink" href="#the-data" title="Permalink to this headline">¶</a></h2>
<p>The data that we received was in the form of three tables:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Adwords data -  information from Google about the ad campaigns</li>
<li>User behavior data - information about what pages users looked at, and for how long, etc.</li>
<li>Purchase data - each row here represented a ticket purchase</li>
</ol>
</div></blockquote>
<p>We were able to narrow down our search for insights by ignoring the Adwords data. That aspect of the problem was less interesting to us, so we didn&#8217;t consider it. That left us with only ~4 Gb of data to search through for <em>cool stuff</em>.</p>
</div>
<div class="section" id="searching">
<h2>Searching<a class="headerlink" href="#searching" title="Permalink to this headline">¶</a></h2>
<p>We started off with a hunch. Many of us grew up in isolated regions. The concert-going experience in an isolated region is really straightforward: a band you&#8217;re interested in is doing a show in the only nearby city, so you try really hard to get tickets because you never know if they&#8217;ll ever return. In terms of our data, we were wondering if we would see any relationships between ticket sale price, and willingness to travel to events.</p>
<p>To assess <em>willingness to travel</em>, we first had to come up with some sense of distance. So we obtained latitude and longitude by using the zip-code, city, and state names in the purchase dataset, and the geolocation of the IP addresses in the user behaviour dataset. Next we used the Haversine formula to convert the lat-long differences into a distance (in km). So now we had a metric for each user in the behaviour dataset, which tells us how far they were from the event they were looking at.</p>
<p>Then we can plot that on a map!</p>
<div class="figure align-center" id="id2">
<a class="reference internal image-reference" href="../../_images/interest_map.png"><img alt="../../_images/interest_map.png" src="../../_images/interest_map.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-text">Events plotted on a map of the USA, with their size corresponding to the median cost of the tickets for that event, and their color corresponding to the median distance of users looking at that event from that event.</span></p>
</div>
<p>The first version of this map had a line connecting every user to every event they looked at. The whole map was black. It turns out people from all over tend to look at events from all over. Makes sense, I assume people are more interested in the band then they are in the location. To fix this, we identified the median user-distance for each event.</p>
<p>Looking at the map, the most interesting thing we noticed is that a lot of events along the west coast seem to attract more interest from afar, and events in the Midwest attract less interest from afar. It seemed like there might be something to this after all.</p>
<p>We hoped to get a finer picture of what was going on however, so we started by breaking down the analysis by region.</p>
<div class="figure align-center" id="id3">
<a class="reference internal image-reference" href="../../_images/filled_bars.png"><img alt="../../_images/filled_bars.png" src="../../_images/filled_bars.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-text">Relative proportion of users from various regions looking at events in various regions.</span></p>
</div>
<p>Looking at this plot, it&#8217;s clear that events in each region are mostly looked at by people from that region. That&#8217;s a great sanity check, but maybe not that interesting. So we added cost back into the picture.</p>
<div class="figure align-center" id="id4">
<a class="reference internal image-reference" href="../../_images/CostvsDistance.png"><img alt="../../_images/CostvsDistance.png" src="../../_images/CostvsDistance.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-text">The median distance of a user looking at a given event (colored by the region the event is in), plotted against the median ticket cost of the event.</span></p>
</div>
<p>Here, we see an interesting trend. It seems like people <strong>do</strong> pay more when the event they are interested in is more distant... or rather, <em>they do if the event is in the west</em>. It&#8217;s also interesting to see the straight horizontal line at about $100. It seems people are hesitant to sell for more than that.</p>
<p>At this point, we felt like we were getting somewhere. We still needed something with a little more resolution than these broad regions though. So we broke all the user-event pairs up by state-to-state, and created a metric I call the <em>Weighted Financial Interest</em> (WFI).</p>
<p>In the raw R code, we calculate it like this:</p>
<div class="highlight-R"><div class="highlight"><pre><span></span>cost_means <span class="o">&lt;-</span> do<span class="p">(</span>clustering_grouped_by_state<span class="p">,</span> get_mean_cost_for_clustering<span class="p">(</span><span class="m">.</span><span class="p">))</span>

cost_means<span class="o">$</span>RI <span class="o">&lt;-</span> cost_means<span class="o">$</span>median_ticket_cost <span class="o">/</span> cost_means<span class="o">$</span>mean_event_cost

cost_states_incomplete <span class="o">&lt;-</span> cost_means <span class="o">%&gt;%</span>
  group_by<span class="p">(</span>buyer_state<span class="p">,</span> event_state<span class="p">)</span> <span class="o">%&gt;%</span>
  summarise<span class="p">(</span>WFI <span class="o">=</span> <span class="kp">mean</span><span class="p">(</span>RI<span class="p">))</span>
</pre></div>
</div>
<p>In more simple terms, it could be described like this:</p>
<blockquote>
<div>There is one WFI value for each pair of states. For each <strong>event state</strong> there is a mean cost for <em>all</em> events in that state. For each user in the <strong>user state</strong> there is a cost for the event that user was looking at (in the <strong>event state</strong>). The relative interest (RI) is the ratio of these two costs: the cost of the particular event the user was looking at divided by the cost of the mean event in that <strong>event state</strong>. Then, for each pair of states, the mean RI is the WFI.</div></blockquote>
</div>
<div class="section" id="results">
<h2>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h2>
<p>What this metric gives us is a measure of how &#8220;interested&#8221; various states are in events being held in other states. For example, we can see that people from New York are looking at events in California which cost less than the average event in California. We also see the reverse, people in California are looking at less expensive events in New York. This might make sense considering that usually when an expensive show is going to New York, it will probably at least also go to California, and vice versa.</p>
<p>Another really interesting trend occurs in Midwest states. For example, we see that the strongest interest in events in Missouri are from neighboring Midwest states.</p>
<p>There is some missing data in the final plot, and some small formatting issues, but I present it here as it was when we presented it at Datafest. We only had an hour or two to learn how to use Leaflet and Shiny.</p>
<p>There are more interesting things we can see in the data, but I&#8217;ll let you play around with it yourself!</p>
<div class="videoWrapper">
<iframe id="ticketmaster-map" src="https://atomoton.shinyapps.io/ticketmaster-map/" style="border: none; width: 100%; height: 100%" frameborder="0"></iframe>
</div><p><div class="clearer"></div></p>
</div>
</div>


            </div>
        </div>
        <div id="page-content-footer">
            <div id="bottom-rel-placeholder" style="display:none">
                
            <div class="rel-nav">
                <a href="../../index.html"
                   title="Andrew E Brereton"
                   class="waves-effect waves-light btn"><i class="mdi-action-home"></i></a>
                <a href="#toc-modal"
                   title="Andrew E Brereton"
                   class="modal-trigger waves-effect waves-light btn"><i class="mts-list-1"></i></a>
                <a class="dropdown-button btn" href="#"
                   data-beloworigin="true"
                   data-activates="relnav-parents-2"><i class="mts-up"></i></a>
                <ul id="relnav-parents-2"
                    class="dropdown-content">
                    <li><a href="../projects.html">Projects</a></li>
                </ul> 
                <a href="../projects.html"
                   title="Projects"
                   class="waves-effect waves-light btn">
                    <i class="mts-left"></i>
                </a>
                <a href="../../blog/blog.html"
                   title="Andrew E. Brereton’s Blog"
                   class="waves-effect waves-light btn">
                    <i class="mts-right"></i>
                </a>
            </div>
            </div>
        </div>
    </div>
</div>
<footer class="page-footer">
    <div class="container">
        <div class="row">
            <div class="col l6 s12">
                <h5>About me:</h5>

                <p class="grey-text text-lighten-4">Andrew E. Brereton is a PhD student studying biochemistry and biophysics at Oregon State University. He enjoys programming, bioinformatics and structural research, rock climbing, playing ukulele, drinking and making beer, and listening to podcasts. He also spends a lot of time working on things like this website.</p>
            </div>
            <!--
            <div class="col l6 s12">
                <ul>
                    <li><a href="https://brereton.me/index.html">Home</a></li>
                    <li><a href="https://brereton.me/brereton-cv.html">CV</a></li>
                    <li><a href="https://github.com/atomoton/ensemblator">Ensemblator</a></li>
                    <li><a href="https://brereton.me/blog/blog.html">Blog</a></li>
                    <li><a href="https://brereton.me/photography/photography.html">Photography</a></li>
                    <li><a href="https://brereton.me/writing/writing.html">Writing</a></li>
                </ul>
            </div>
            -->
        </div>
    </div>
    <div class="footer-copyright" role="contentinfo">
        <div class="container">&copy; Copyright 2017, Andrew E. Brereton.
        </div>
    </div>
</footer>

<script type="text/javascript" src="../../_static/jquery.js"></script>
<script type="text/javascript" src="../../_static/underscore.js"></script>
<script type="text/javascript" src="../../_static/doctools.js"></script>
<script type="text/javascript" src="../../_static/materialize.min.js"></script>
<script type="text/javascript" src="../../_static/theme.js"></script> 
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-74739470-1', 'auto');
    ga('send', 'pageview');
</script>
<a id="btt"><i class="mdi-navigation-expand-less"></i></a>
</body>
</html>