<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='Datafest Oregon 2016 This year, I competed in Datafest. Datafest is a data analysis competition for students, with a corporate sponsor who provides the data. For this competition Ticketmaster provided the data, and Datafest itself was hosted by Dr. Charlotte Wickham, an assistant professor in the Statistics Department at OSU.
Our team was called &ldquo;Pretty Terrestrial&rdquo;, and consisted of myself, Michelle Wiley, Steven Freidman, and Camden Lopez. It was a lot of fun working together on this project, especially when it got down to crunch time in the final hour.'>
<meta name='theme-color' content='#ffcd00'>

<meta property='og:title' content='Datafest Oregon 2016 • Andrew E Brereton'>
<meta property='og:description' content='Datafest Oregon 2016 This year, I competed in Datafest. Datafest is a data analysis competition for students, with a corporate sponsor who provides the data. For this competition Ticketmaster provided the data, and Datafest itself was hosted by Dr. Charlotte Wickham, an assistant professor in the Statistics Department at OSU.
Our team was called &ldquo;Pretty Terrestrial&rdquo;, and consisted of myself, Michelle Wiley, Steven Freidman, and Camden Lopez. It was a lot of fun working together on this project, especially when it got down to crunch time in the final hour.'>
<meta property='og:url' content='https://brereton.me/blog/datafest/'>
<meta property='og:site_name' content='Andrew E Brereton'>
<meta property='og:type' content='article'><meta property='article:section' content='Blog'><meta property='article:tag' content='science'><meta property='article:tag' content='data science'><meta property='article:published_time' content='2016-06-11T00:00:00Z'/><meta property='article:modified_time' content='2016-06-11T00:00:00Z'/><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.40.1" />

  <title>Datafest Oregon 2016 • Andrew E Brereton</title>
  <link rel='canonical' href='https://brereton.me/blog/datafest/'>
  
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='/assets/css/main.b0a0b202.css'><style>
:root{--color-accent:#ffcd00;}
</style>

<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-74739470-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

</head>


<body class='page type-blog'>

  <div class='site'>

    <a class='screen-reader-text' href='#content'>Skip to Content</a>

    <div class='main'>

      <nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    
    <ul><li class='item'>
        <a href='/'>home</a>
      </li><li class='item'>
        <a href='/blog'>blog</a>
      </li><li class='item'>
        <a href='/tags'>tags</a>
      </li><li class='item'>
        <a href='/photography'>photography</a>
      </li></ul>
  </div>
</nav>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>Andrew E Brereton</p><p class='desc site-desc'></p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>Datafest Oregon 2016</h1>
      

    </div>
    
<div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2016-06-11T00:00:00Z'>2016, Jun 11</time>
</span>

  
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>
5 mins read
</span>


</div>


  </div>
</header>

  
  

  <div class='container entry-content'>
  

<p><img src="/blog/resources/datafest-header.jpg" alt="image" /></p>

<h1 id="datafest-oregon-2016">Datafest Oregon 2016</h1>

<p>This year, I competed in Datafest. Datafest is a data analysis
competition for students, with a corporate sponsor who provides the
data. For this competition Ticketmaster provided the data, and Datafest
itself was hosted by Dr. Charlotte Wickham, an assistant professor in
the Statistics Department at OSU.</p>

<p>Our team was called &ldquo;Pretty Terrestrial&rdquo;, and consisted of myself,
Michelle Wiley, Steven Freidman, and Camden Lopez. It was a lot of fun
working together on this project, especially when it got down to crunch
time in the final hour.</p>

<p>The best data visualization on here is the interactive map at the end,
so if you want to skip ahead to that, <a href="#results">check out the results
section</a>.</p>

<p>The team (from left to right): Steve Freidman, Andrew Brereton (me),
Camden Lopez, Michelle
Wiley.<br />
<img src="/blog/resources/pretty_terrestrial.jpg" alt="" /></p>

<h2 id="the-data">The Data</h2>

<p>The data that we received was in the form of three tables:</p>

<ol>
<li>Adwords data - information from Google about the ad campaigns</li>
<li>User behavior data - information about what pages users looked at, and for how long, etc.</li>
<li>Purchase data - each row here represented a ticket purchase</li>
</ol>

<p>We were able to narrow down our search for insights by ignoring the
Adwords data. That aspect of the problem was less interesting to us, so
we didn&rsquo;t consider it. That left us with only ~4 Gb of data to search
through for <em>cool stuff</em>.</p>

<h2 id="searching">Searching</h2>

<p>We started off with a hunch. Many of us grew up in isolated regions. The
concert-going experience in an isolated region is really
straightforward: a band you&rsquo;re interested in is doing a show in the only
nearby city, so you try really hard to get tickets because you never
know if they&rsquo;ll ever return. In terms of our data, we were wondering if
we would see any relationships between ticket sale price, and
willingness to travel to events.</p>

<p>To assess <em>willingness to travel</em>, we first had to come up with some
sense of distance. So we obtained latitude and longitude by using the
zip-code, city, and state names in the purchase dataset, and the
geolocation of the IP addresses in the user behaviour dataset. Next we
used the Haversine formula to convert the lat-long differences into a
distance (in km). So now we had a metric for each user in the behaviour
dataset, which tells us how far they were from the event they were
looking at.</p>

<p>Then we can plot that on a map!</p>

<p><img src="/blog/resources/interest_map.png" alt="Events plotted on a map of the USA, with their size corresponding to
the median cost of the tickets for that event, and their color
corresponding to the median distance of users looking at that event from
that event." /></p>

<p>The first version of this map had a line connecting every user to every
event they looked at. The whole map was black. It turns out people from
all over tend to look at events from all over. Makes sense, I assume
people are more interested in the band then they are in the location. To
fix this, we identified the median user-distance for each event.</p>

<p>Looking at the map, the most interesting thing we noticed is that a lot
of events along the west coast seem to attract more interest from afar,
and events in the Midwest attract less interest from afar. It seemed
like there might be something to this after all.</p>

<p>We hoped to get a finer picture of what was going on however, so we
started by breaking down the analysis by region.</p>

<p><img src="/blog/resources/filled_bars.png" alt="Relative proportion of users from various regions looking at events in
various regions." /></p>

<p>Looking at this plot, it&rsquo;s clear that events in each region are mostly
looked at by people from that region. That&rsquo;s a great sanity check, but
maybe not that interesting. So we added cost back into the picture.</p>

<p><img src="/blog/resources/CostvsDistance.png" alt="The median distance of a user looking at a given event (colored by the
region the event is in), plotted against the median ticket cost of the
event." /></p>

<p>Here, we see an interesting trend. It seems like people <strong>do</strong> pay more
when the event they are interested in is more distant&hellip; or rather,
<em>they do if the event is in the west</em>. It&rsquo;s also interesting to see the
straight horizontal line at about \$100. It seems people are hesitant to
sell for more than that.</p>

<p>At this point, we felt like we were getting somewhere. We still needed
something with a little more resolution than these broad regions though.
So we broke all the user-event pairs up by state-to-state, and created a
metric I call the <em>Weighted Financial Interest</em> (WFI).</p>

<p>In the raw R code, we calculate it like this:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">cost_means <span style="color:#f92672">&lt;-</span> do(clustering_grouped_by_state, get_mean_cost_for_clustering(<span style="color:#ae81ff">.</span>))

cost_means<span style="color:#f92672">$</span>RI <span style="color:#f92672">&lt;-</span> cost_means<span style="color:#f92672">$</span>median_ticket_cost <span style="color:#f92672">/</span> cost_means<span style="color:#f92672">$</span>mean_event_cost

cost_states_incomplete <span style="color:#f92672">&lt;-</span> cost_means <span style="color:#f92672">%&gt;%</span> 
  group_by(buyer_state, event_state) <span style="color:#f92672">%&gt;%</span> 
  summarise(WFI <span style="color:#f92672">=</span> <span style="color:#66d9ef">mean</span>(RI))</code></pre></div>

<p>In more simple terms, it could be described like this:</p>

<blockquote>
<p>There is one WFI value for each pair of states. For each <strong>event
state</strong> there is a mean cost for <em>all</em> events in that state. For each
user in the <strong>user state</strong> there is a cost for the event that user was
looking at (in the <strong>event state</strong>). The relative interest (RI) is the
ratio of these two costs: the cost of the particular event the user
was looking at divided by the cost of the mean event in that <strong>event
state</strong>. Then, for each pair of states, the mean RI is the WFI.</p>
</blockquote>

<h2 id="results">Results</h2>

<p>What this metric gives us is a measure of how &ldquo;interested&rdquo; various
states are in events being held in other states. For example, we can see
that people from New York are looking at events in California which cost
less than the average event in California. We also see the reverse,
people in California are looking at less expensive events in New York.
This might make sense considering that usually when an expensive show is
going to New York, it will probably at least also go to California, and
vice versa.</p>

<p>Another really interesting trend occurs in Midwest states. For example,
we see that the strongest interest in events in Missouri are from
neighboring Midwest states.</p>

<p>There is some missing data in the final plot, and some small formatting
issues, but I present it here as it was when we presented it at
Datafest. We only had an hour or two to learn how to use Leaflet and
Shiny.</p>

<p>There are more interesting things we can see in the data, but I&rsquo;ll let
you play around with it yourself!</p>

<div class="videoWrapper">
<iframe id="ticketmaster-map" src="https://atomoton.shinyapps.io/ticketmaster-map/" style="border: none; width: 100%; height: 100%; margin: auto" frameborder="0"></iframe>
</div>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'>
  <div class='tags'>
  <span class='taxonomy-icon'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>
</span>
  <span class='screen-reader-text'>Tags: </span><a class='tag' href='/tags/science'>Science</a>, <a class='tag' href='/tags/data-science'>data science</a></div>

  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/blog/ukulele/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>Making a Travel Ukulele</a>
    </div><div class='next-entry sep-before'>
      <a href='/blog/mutants/'>
        <span class='screen-reader-text'>Next post: </span>Mutants Among Us: the unexpected effects of a mutation in AMPD1<span aria-hidden='true'>Next <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>
  
</svg>
</span>
      </a>
    </div></div>
</nav>




      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'>
          <section class='widget widget-social_menu sep-after'><header>
    <h4 id = "social-widget">
        Social Media Links:
    </h4>
  </header><nav aria-label='Social Menu'>
    <ul><li>
        <a href='https://github.com/atomoton' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Github account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>
</a>
      </li><li>
        <a href='https://twitter.com/atomoton' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Twitter account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
  
</svg>
</a>
      </li><li>
        <a href='https://instagram.com/atomoton' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Instagram account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
  <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
  <line x1="17.5" y1="6.5" x2="17.5" y2="6.5"/>
  
</svg>
</a>
      </li><li>
        <a href='mailto:andrew@brereton.me' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Contact via Email</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
  <polyline points="22,6 12,13 2,6"/>
  
</svg>
</a>
      </li><li>
        <a href='https://gitlab.com/brereton' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Gitlab account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"/>
  
</svg>
</a>
      </li><li>
        <a href='https://linkedin.com/in/andrew-brereton-935ba1149' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Linkedin account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
  <rect x="2" y="9" width="4" height="12"/>
  <circle cx="4" cy="4" r="2"/>
  
</svg>
</a>
      </li></ul>
  </nav>
</section>
          <div class='copyright'>
  <p> &copy; 2017-2019 Andrew E. Brereton </p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__public_path__='\/assets\/js\/'</script>

<script src='/assets/js/main.4d3afaaf.js'></script>
</body>

</html>

